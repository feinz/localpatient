{% extends "base_generic.html" %}

{% block content %}
  <h5>Welcome to Local Patient DB</h5>
  <p>The database has the following record counts:</p>
  <ul>
    <li><strong>Patient:</strong> {{ patient_number }}</li>
    <li><strong>Patient Active:</strong> {{ patient_total_act }}</li>
    <li><strong>Patient RIP:</strong> {{ patient_total_rip }}</li>
    <li><strong>Patient MIA:</strong> {{ patient_total_mia }}</li>
  </ul>

    <!-- Chart-->
  <div id="container"></div>
  
  <form method='GET' action='{% url "index" %}' id="graphform">
    <button type='submit' name='q' value='2019' class='waves-effect waves-light btn' id='b2019'>2019</button>
    <button type='submit' name='q' value='2018' class='waves-effect waves-light btn' id='b2018'>2018</button>
    <button type='submit' name='q' value='2017' class='waves-effect waves-light btn' id='b2017'>2017</button>
    <button type='submit' name='q' value='2016' class='waves-effect waves-light btn' id='b2016'>2016</button>
    <button type='submit' name='q' value='2015' class='waves-effect waves-light btn' id='b2015'>2015</button>
    <button type='submit' name='q' value='' class='waves-effect waves-light btn' id='b2019'>View All</button>
  </form>
  <form method='GET' action='{% url "index" %}' id="graphform">
    <input pattern="[0-9]*" inputmode="numeric" type='number' name='q' placeholder="Or Enter Year" value='{{ request.GET.q }}' id='entry'>
    <button type='submit' value='Filter Year' class='waves-effect waves-light btn' id='sub1'>Go<i class="material-icons right">send</i></button>
  </form>
  </br>
  <ul>
  <li><strong>For The Year:</strong> {{ currentyear }}</li>
  <li><strong>Patient Active:</strong> {{ patient_yearinput_act }}</li>
  <li><strong>Patient RIP:</strong> {{ patient_yearinput_rip }}</li>
  <li><strong>Patient MIA:</strong> {{ patient_yearinput_mia }}</li>
  </ul>

  <script src="https://code.highcharts.com/highcharts.src.js"></script>
  <script>
    var patient_act = {{ patient_yearinput_act }};
    var patient_rip = {{ patient_yearinput_rip }};
    var patient_mia = {{ patient_yearinput_mia }};
    Highcharts.chart('container', {
        chart: {
            type: 'column'
        },
        title: {
            text: 'Patients Statistic For The Year: {{ currentyear }}'
        },
        xAxis: {
            categories: ['Active', 'RIP', 'Missing In Action']
        },
        series: [{
            name: '2015',
            data: [patient_act, patient_rip, patient_mia]
        }, {
            name: '2016',
            data: [patient_act, patient_rip, patient_mia]
        }, {
            name: '2017',
            data: [patient_act, patient_rip, patient_mia]
        }, {
            name: '2018',
            data: [patient_act, patient_rip, patient_mia]
        }, {
            name: '2019',
            data: [patient_act, patient_rip, patient_mia]
        }
        
        ]
    });
  </script>
{% endblock %}